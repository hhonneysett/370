@model LibraryAssistantApp.Models.Questionnaire

@{
    ViewBag.Title = "Edit";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>Edit Questionnaire</h2>

@Html.Hidden("Questionnaire_ID", (int)ViewBag.Questionnaire_ID, new { id = "Questionnaire_ID" })

<div class="panel panel-default">
    <div class="panel-heading">Edit Questionnaire details</div>
    <div class="panel-body">

        <div class="form-horizontal">
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            <div class="form-group">
                @Html.LabelFor(model => model.Name, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.Name, new { htmlAttributes = new { @class = "form-control", id = "Name", @value = ViewBag.Name } })
                    <label class="text-danger" id="Name_Validation"></label><font color="red">@ViewBag.DuplicateError</font>
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.Description, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.Description, new { htmlAttributes = new { @class = "form-control", id = "Description", @value = ViewBag.Description } })
                    <label class="text-danger" id="Description_Validation"></label>
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.Active_From, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.Active_From, new { htmlAttributes = new { @class = "datepick form-control", id = "Active_From", @readonly = "true", @value = ViewBag.Active_From } })
                    <label class="text-danger" id="Active_From_Validation"></label>
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.Active_To, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.Active_To, new { htmlAttributes = new { @class = "datepick form-control", id = "Active_To", @readonly = "true", @value = ViewBag.Active_To } })
                    <label class="text-danger" id="Active_To_Validation"></label>
                </div>
            </div>

            <script>
                $('.datepick').each(function () {
                    $(this).datepicker({ minDate: 0 });
                });
            </script>

            <div class="form-group">
                @Html.LabelFor(model => model.Assessment_Type, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.DropDownListFor(model => model.Assessment_Type, new SelectList(
                  new List<Object>{
                       new { value = "Other" , text = "Other"  },
                       new { value = "Venue" , text = "Venue" },
                       new { value = "Employee" , text = "Employee"},
                       new { value = "Training Session" , text = "Training Session"}
                    },
                  "value",
                  "text",
                   @ViewBag.Assess))
                    @*@Html.DropDownList("Assessment_Type", new List<SelectListItem>
                     {
                        new SelectListItem{ Text="Other", Value = "Other" },
                        new SelectListItem{ Text="Venue", Value = "Venue" },
                        new SelectListItem{ Text="Employee", Value = "Employee" },
                        new SelectListItem{ Text="Training Session", Value = "Training Session" }
                     }, "Select an assessment type", htmlAttributes: new { @class = "form-control", id = "Assessment_Type", @value = (string)ViewBag.Assess })*@
                        <label class="text-danger" id="Assessment_Type_Validation"></label>
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(model => model.Topic_Seq, "Topic", htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">

                    @Html.DropDownList("Topic", null, "All", htmlAttributes: new { @class = "form-control", id = "Topic" })
                    <label class="text-danger" id="Topic_validation"></label>

                </div>
            </div>

            <input type="submit" value="Done" class="btn btn-default" onclick="validateInput();" /> <input type="button" value="Back" class="btn btn-default" onclick="location.href='@Url.Action("Index","Questionnaire")'" /> <label id="Warning"></label>
        </div>

    </div>
</div>



<script>
    function validateInput() {

        document.getElementById("Name_Validation").innerHTML = "";
        document.getElementById("Description_Validation").innerHTML = "";
        document.getElementById("Active_From_Validation").innerHTML = "";
        document.getElementById("Active_To_Validation").innerHTML = "";
        document.getElementById("Assessment_Type_Validation").innerHTML = "";
        document.getElementById("Topic_validation").innerHTML = "";

        var Name = document.getElementById("Name").value;
        var Description = document.getElementById("Description").value;
        var Active_From = document.getElementById("Active_From").value;
        var Active_To = document.getElementById("Active_To").value;
        var Assessment_Type = document.getElementById("Assessment_Type").value;
        var Topic = document.getElementById("Topic").value;

        if (Name == "" && Description == "" && Active_From == "" && Active_To == "" && Assessment_Type == "" & Topic== "") {
            document.getElementById("Name_Validation").innerHTML = "Name is required";
            document.getElementById("Description_Validation").innerHTML = "Description is required";
            document.getElementById("Active_From_Validation").innerHTML = "Active from is required";
            document.getElementById("Active_To_Validation").innerHTML = "Active to is required";
            document.getElementById("Assessment_Type_Validation").innerHTML = "Assessment type is required ";
            document.getElementById("Topic_validation").innerHTML = "Topic is required";
        }
        else if (Name == "" && Description == "" && Active_From == "" && Active_To == "" && Assessment_Type == "") {
            document.getElementById("Name_Validation").innerHTML = "Name is required";
            document.getElementById("Description_Validation").innerHTML = "Description is required";
            document.getElementById("Active_From_Validation").innerHTML = "Active from is required";
            document.getElementById("Active_To_Validation").innerHTML = "Active to is required";
            document.getElementById("Assessment_Type_Validation").innerHTML = "Assessment type is required ";
        }
        else if (Name == "" && Description == "" && Active_From == "" && Active_To == "" & Topic== "") {
            document.getElementById("Name_Validation").innerHTML = "Name is required";
            document.getElementById("Description_Validation").innerHTML = "Description is required";
            document.getElementById("Active_From_Validation").innerHTML = "Active from is required";
            document.getElementById("Active_To_Validation").innerHTML = "Active to is required";
            document.getElementById("Topic_validation").innerHTML = "Topic is required";
        }
        else if (Name == "" && Description == "" && Active_From == "" && Assessment_Type == "" & Topic== "") {
            document.getElementById("Name_Validation").innerHTML = "Name is required";
            document.getElementById("Description_Validation").innerHTML = "Description is required";
            document.getElementById("Active_From_Validation").innerHTML = "Active from is required";
            document.getElementById("Assessment_Type_Validation").innerHTML = "Assessment type is required ";
            document.getElementById("Topic_validation").innerHTML = "Topic is required";
        }
        else if (Name == "" && Description == "" && Active_To == "" && Assessment_Type == "" & Topic== "") {
            document.getElementById("Name_Validation").innerHTML = "Name is required";
            document.getElementById("Description_Validation").innerHTML = "Description is required";
            document.getElementById("Active_To_Validation").innerHTML = "Active to is required";
            document.getElementById("Assessment_Type_Validation").innerHTML = "Assessment type is required ";
            document.getElementById("Topic_validation").innerHTML = "Topic is required";
        }
        else if (Name == "" && Active_From == "" && Active_To == "" && Assessment_Type == "" & Topic== "") {
            document.getElementById("Name_Validation").innerHTML = "Name is required";
            document.getElementById("Active_From_Validation").innerHTML = "Active from is required";
            document.getElementById("Active_To_Validation").innerHTML = "Active to is required";
            document.getElementById("Assessment_Type_Validation").innerHTML = "Assessment type is required ";
            document.getElementById("Topic_validation").innerHTML = "Topic is required";
        }
        else if (Description == "" && Active_From == "" && Active_To == "" && Assessment_Type == "" & Topic== "") {
            document.getElementById("Description_Validation").innerHTML = "Description is required";
            document.getElementById("Active_From_Validation").innerHTML = "Active from is required";
            document.getElementById("Active_To_Validation").innerHTML = "Active to is required";
            document.getElementById("Assessment_Type_Validation").innerHTML = "Assessment type is required ";
            document.getElementById("Topic_validation").innerHTML = "Topic is required";
        }
        else if (Name == "")
        {
            document.getElementById("Name_Validation").innerHTML = "Name is required";
        }
        else if (Description == "")
        {
            document.getElementById("Description_Validation").innerHTML = "Description is required";
        }
        else if (Active_From == "")
        {
            document.getElementById("Active_From_Validation").innerHTML = "Active from is required";
        }
        else if (Active_To == "")
        {
            document.getElementById("Active_To_Validation").innerHTML = "Active to is required";
        }
        else if (Assessment_Type == "")
        {
            document.getElementById("Assessment_Type_Validation").innerHTML = "Assessment type is required ";
        }
        else if (Topic == "")
        {
            document.getElementById("Topic_validation").innerHTML = "Topic is required";
        }
        else {
            RunURL();
        }
    }
</script>

<script>
    function RunURL() {
        var Name = document.getElementById("Name").value;
        var Description = document.getElementById("Description").value;
        var Active_From = document.getElementById("Active_From").value;
        var Active_To = document.getElementById("Active_To").value;
        var Assessment_Type = document.getElementById("Assessment_Type").value;
        var Topic = document.getElementById("Topic").value;
        var Questionnaire_ID = document.getElementById("Questionnaire_ID").value;

        window.location.href = "/Questionnaire/Editing?Name=" + Name + "&Description=" + Description + "&Active_From=" + Active_From + "&Active_To=" + Active_To + "&Assessment_Type=" + Assessment_Type + "&Topic_Seq=" + Topic + "&Questionnaire_ID=" + Questionnaire_ID;
    }
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script>
$(document).ready(function(){

    $("#Topic").mouseenter(function () {
        document.getElementById("Warning").innerHTML = "If the topic is changed then all previously assigned questions will be deleted and new questions must be assigned to the questionnaire."
        document.getElementById("Warning").style.color = "red";
    });


    $("#Topic").mouseout(function () {
            document.getElementById("Warning").innerHTML = ""});
});
</script>


<script>

    window.onload = function () {
        forceAssessmentType();
    };


    function forceAssessmentType()
    {

        var d = document.getElementById("Assessment_Type");
        d.className += " form-control";

       
    }

</script>
